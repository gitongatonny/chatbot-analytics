<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self'; style-src 'self'; connect-src https:;">
  <title>Chatbot Analytics Submission Portal</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="assets/eadirectory-logo.png" type="image/x-icon" />
</head>

<body>
  <div class="container">
    <h1>Chatbot Analytics Portal</h1>
    <p class="subtitle">Submit weekly chatbot usage data for comprehensive analytics processing</p>

    <div class="info-box">
      <h3>📊 Submission Guidelines</h3>
      <p>Upload your Chatbot Studio Activity JSON file. The system will automatically detect the company, validate
        the data structure, calculate comprehensive metrics, and generate detailed reports.</p>
    </div>

    <form id="submissionForm">
      <div class="form-group">
        <label for="company">Select Company <span class="required">*</span></label>
        <select id="company" required>
          <option value="">-- Select Company --</option>
          <option value="maisha-bora">Maisha Bora Sacco</option>
          <option value="new-company">+ Add New Company</option>
        </select>
        <div class="company-info" id="companyInfo"></div>
      </div>

      <div class="form-group">
        <label for="fileInput">Upload JSON Data <span class="required">*</span></label>
        <div class="file-upload-wrapper">
          <label for="fileInput" class="file-upload-button" id="fileUploadButton">
            <div>
              <div class="upload-icon">📁</div>
              <div class="upload-text">Click to upload or drag and drop</div>
              <div class="upload-text" style="font-size: 14px; color: var(--text-secondary); margin-top: 5px;">
                JSON files only (max 10MB)
              </div>
            </div>
          </label>
          <input type="file" id="fileInput" accept=".json" required />
        </div>
        <div class="file-info" id="fileInfo"></div>
        <div class="validation-error" id="fileError"></div>
      </div>

      <div class="form-group">
        <label for="apiKey">API Key <span class="required">*</span></label>
        <input type="password" id="apiKey" class="api-key-input" placeholder="Enter your API key" required />
        <div class="validation-error" id="apiKeyError"></div>
      </div>

      <div class="preview-section" id="previewSection">
        <div class="preview-header">📊 Data Analysis Preview</div>
        <div class="data-insights" id="dataInsights"></div>
        <div class="preview-header" style="margin-top: 20px;">📋 Raw Data Preview</div>
        <div class="preview-content" id="previewContent"></div>
      </div>

      <button type="submit" class="submit-btn" id="submitBtn">
        <span id="buttonText">Submit Analytics Data</span>
      </button>

      <div class="status-message" id="statusMessage"></div>
    </form>
  </div>

  <script src="script.js"></script>
</body>

</html>
